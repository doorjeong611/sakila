<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.sakila.mapper.FilmMapper">

	<!-- /on/actorOne : selectFilmTitleListByActor -->
	<select id="selectFilmTitleListByActor" parameterType="int" resultType="com.example.sakila.vo.Film">
		SELECT f.film_id filmId
			   , f.title title
		FROM film_actor fa INNER JOIN film f
		ON fa.film_id = f.film_id
		WHERE fa.actor_id = #{actorId}				
	</select>

	<!-- /on/filmOne : 영화 정보  -->
	<select id="selectfilmOne" parameterType="int" resultType="map">
		SELECT f.film_id filmId
				, f.title title
				, f.description description
				, f.release_year releaseYear
				, f.rental_duration rentalDuration
				, f.rental_rate rentalRate
				, f.length length
				, f.replacement_cost replacementCost
				, f.rating rating
				, f.special_features specialFeatures
				, f.last_update lastUpdate
				, f.original_language_id originalLanguageId
				, f.language_id languageId
				, l.name language
				  
		FROM film f INNER JOIN language l
		ON f.language_id = l.language_id
		WHERE f.film_id = #{filmId}
	</select>

	<!-- /on/addFilm -->
	<insert id="insertFilm" parameterType="com.example.sakila.vo.Film">
		INSERT INTO film(title
						, description
						, release_year
						, language_id
						, original_language_id
						, rental_duration
						, rental_rate
						, length
						, replacement_cost
						, rating
						, special_features) 
		VALUES(
			#{title}
			,#{description}
			,#{releaseYear}
			,#{languageId}
			,#{originalLanguageId}
			,#{rentalDuration}
			,#{rentalRate}
			,#{length}
			,#{replacementCost}
			,#{rating}
			,#{specialFeatures}
		
		)
	
	</insert>

	<!--  -->
	<select id="selectFilmListByTitle" parameterType="String" resultType="com.example.sakila.vo.Film">
		SELECT	film_id filmId
				, title
		FROM film
		WHERE title LIKE CONCAT('%', #{searchTitle}, '%')
	</select>



</mapper>